<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Demo: Build a store locator using Mapbox GL JS</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<script src="https://api.tiles.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.js"></script>
<link
href="https://api.tiles.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.css"
rel="stylesheet"
/>
<style>
body {
color: #404040;
font: 400 15px/22px 'Source Sans Pro', 'Helvetica Neue', sans-serif;
margin: 0;
padding: 0;
-webkit-font-smoothing: antialiased;
}

* {
box-sizing: border-box;
}

.sidebar {
position: absolute;
width: 33.3333%;
height: 100%;
top: 0;
left: 0;
overflow: hidden;
border-right: 1px solid rgba(0, 0, 0, 0.25);
}

.map {
position: absolute;
left: 33.3333%;
width: 66.6666%;
top: 0;
bottom: 0;
}

h1 {
font-size: 22px;
margin: 0;
font-weight: 400;
line-height: 20px;
padding: 20px 2px;
}

a {
color: #404040;
text-decoration: none;
}

a:hover {
color: #101010;
}

.heading {
background: #fff;
border-bottom: 1px solid #eee;
min-height: 60px;
line-height: 60px;
padding: 0 10px;
background-color: #00853e;
color: #fff;
}

.listings {
height: 100%;
overflow: auto;
padding-bottom: 60px;
}

.listings .item {
display: block;
border-bottom: 1px solid #eee;
padding: 10px;
text-decoration: none;
}

.listings .item:last-child {
border-bottom: none;
}
.listings .item .title {
display: block;
color: #00853e;
font-weight: 700;
}

.listings .item .title small {
font-weight: 400;
}
.listings .item.active .title,
.listings .item .title:hover {
color: #8cc63f;
}
.listings .item.active {
background-color: #f8f8f8;
}
::-webkit-scrollbar {
width: 3px;
height: 3px;
border-left: 0;
background: rgba(0, 0, 0, 0.1);
}
::-webkit-scrollbar-track {
background: none;
}
::-webkit-scrollbar-thumb {
background: #00853e;
border-radius: 0;
}

.marker {
border: none;
cursor: pointer;
height: 56px;
width: 56px;
background-image: url(marker.png);
}

/* Marker tweaks */
.mapboxgl-popup {
padding-bottom: 50px;
}

.mapboxgl-popup-close-button {
display: none;
}
.mapboxgl-popup-content {
font: 400 15px/22px 'Source Sans Pro', 'Helvetica Neue', sans-serif;
padding: 0;
width: 180px;
}
.mapboxgl-popup-content h3 {
background: #91c949;
color: #fff;
margin: 0;
padding: 10px;
border-radius: 3px 3px 0 0;
font-weight: 700;
margin-top: -15px;
}

.mapboxgl-popup-content h4 {
margin: 0;
padding: 10px;
font-weight: 400;
}

.mapboxgl-popup-content div {
padding: 10px;
}

.mapboxgl-popup-anchor-top > .mapboxgl-popup-content {
margin-top: 15px;
}

.mapboxgl-popup-anchor-top > .mapboxgl-popup-tip {
border-bottom-color: #91c949;
}
</style>
</head>
<body>
<div class="sidebar">
<div class="heading">
<h1>Our locations</h1>
</div>
<div id="listings" class="listings"></div>
</div>
<div id="map" class="map"></div>
<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiZmVsaXhjYXJ2ZXIiLCJhIjoiY2t5ZWtuNXNpMTNsbDJ1bnAzajgxMGF6eiJ9._MZ3M6IxSs8WWm3PS7FRiQ';

/**
* Add the map to the page
*/
const map = new mapboxgl.Map({
container: 'map',
style: 'mapbox://styles/mapbox/light-v10',
center: [-77.034084142948, 38.909671288923],
zoom: 13,
scrollZoom: false
});

// Add zoom and rotation controls to the map.
map.addControl(new mapboxgl.NavigationControl());

const stores = {
'type': 'FeatureCollection',
'features': [{"title":"13 passengers injured after van rolls over in upstate New York","meta":"55 mins ago  |  nypost  |  top"},{"title":"Shell fined for overcharging household energy bills - live updates","meta":"59 mins ago  |  telegraph  |  business"},{"title":"Solar-powered drone crashes in US after record 64-day flight","meta":"1 Hour(s) ago  |  iol  |  technology"},{"title":"Road House: Agents of SHIELD Alum and More Join Jake Gyllenhaal's Reboot","meta":"7 Hour(s) ago  |  comicbook  |  entertainment"},{"title":"Layers of Fears Gets a Lick of Paint in Eye-Catching PS5 Trailer","meta":"9 Hour(s) ago  |  pushsquare  |  entertainment"},{"title":"Not Everyone's Impressed with PS5's New DualSense Edge Pad","meta":"9 Hour(s) ago  |  pushsquare  |  entertainment"},{"title":"Archives asked for records in 2021 after Trump lawyer agreed they should be returned, email says - The Washington Post","meta":"9 Hour(s) ago  |  The Washington Post  |  "},{"title":"Kamloops Senior Men’s Baseball League to host provincials","meta":"9 Hour(s) ago  |  kamloopsthisweek  |  top"},{"title":"Champions League draw pots set for group stage - ESPN","meta":"9 Hour(s) ago  |  ESPN  |  "},{"title":"Justice Department releases unredacted Barr memo detailing decision not to charge Trump with obstructing Russia probe - CNN","meta":"9 Hour(s) ago  |  CNN  |  "},{"title":"The Dark Pictures: The Devil in Me lanseres i november - Gamereactor Norge","meta":"9 Hour(s) ago  |  Gamereactor.no  |  "},{"title":"Who qualifies for Biden's student loan forgiveness plan and what else to know - The Washington Post","meta":"9 Hour(s) ago  |  The Washington Post  |  "},{"title":"Experimental, genetically attenuated malaria vaccine warrants further exploration - News-Medical.Net","meta":"9 Hour(s) ago  |  News-Medical.Net  |  "},{"title":"‘Sophisticated car theft’ operation busted: New Westminster police","meta":"10 Hour(s) ago  |  citynews1130  |  top"},{"title":"The Rising of the Shield Hero Exec Details Season 2's Major Challenges","meta":"10 Hour(s) ago  |  comicbook  |  entertainment"},{"title":"Federal government approves two new offshore greenhouse gas storage areas off WA and NT - ABC News","meta":"10 Hour(s) ago  |  ABC News (AU)  |  "},{"title":"RCMP commissioner apologizes to families of victims in mass shooting - CBC.ca","meta":"10 Hour(s) ago  |  CBC News  |  "},{"title":"At least 22 killed in Russian strike on rail station on Ukraine's independence day - The Guardian","meta":"10 Hour(s) ago  |  The Guardian  |  "},{"title":"‘Aquaman 2’ Heads To Christmas 2023, ‘Shazam: Fury Of The Gods’ Goes To March; HBO Max Pics ‘House Party’ & ‘Evil Dead Rise’ Going Theatrical – Warner Bros. Release Date Changes - Deadline","meta":"10 Hour(s) ago  |  Deadline  |  "},{"title":"Champions League group stage draw: Who can LFC face? - This Is Anfield","meta":"10 Hour(s) ago  |  This Is Anfield  |  "},{"title":"Fiery fight over dog broke up Sylvester Stallone’s 25-year marriage","meta":"10 Hour(s) ago  |  nypost  |  top"},{"title":"'Room to reflect': A pilot workplace resiliency intervention for nurses","meta":"10 Hour(s) ago  |  medicalxpress  |  top"},{"title":"3 juveniles, 1 adult shot in front of Carl Schurz High School - WGN TV Chicago","meta":"10 Hour(s) ago  |  WGN TV Chicago  |  "},{"title":"Nvidia sales forecast falls about $1 billion short of expectations, stock falls - MarketWatch","meta":"11 Hour(s) ago  |  MarketWatch  |  "},{"title":"Koenigsegg’s CC850 Hypercar Sold Out in a Flash, So It’s Building 20 More to Keep Up With Demand","meta":"11 Hour(s) ago  |  robbreport  |  technology"},{"title":"WWE Reportedly Wants Another Former Champion Back in the Company","meta":"11 Hour(s) ago  |  comicbook  |  entertainment"},{"title":"Cancer surgeries in Alberta above pre-pandemic levels","meta":"11 Hour(s) ago  |  lethbridgenewsnow  |  top"},{"title":"iPhone 14 Launches Sept. 7: Apple Event Confirmed - CNET","meta":"11 Hour(s) ago  |  CNET  |  "},{"title":"Gene therapy partly restores cone function in two completely colorblind children - Science Daily","meta":"11 Hour(s) ago  |  Science Daily  |  "},{"title":"US housing market in 'much worse shape' than Fed admits: economist - New York Post ","meta":"11 Hour(s) ago  |  New York Post  |  "},{"title":"Manitoba pastor Tobias Tissen, 4 others convicted for breaking COVID-19 gathering restrictions","meta":"11 Hour(s) ago  |  cbc.ca  |  general"},{"title":"Island beekeeper says SFU varroa mite treatment may create a new solution - My Cowichan Valley Now","meta":"12 Hour(s) ago  |  My Cowichan Valley Now  |  "},{"title":"DOH reports four additional monkeypox cases in Hawaiʻi - Hawaii State Department of Health","meta":"12 Hour(s) ago  |  Hawaii.gov  |  "},{"title":"Breakfast briefing; Struggling for momentum | interest.co.nz - Interest.co.nz","meta":"12 Hour(s) ago  |  Interest.co.nz  |  "},{"title":"Stellenbosch University choir wows passengers with impromptu in-flight performance","meta":"12 Hour(s) ago  |  news24.com  |  general"},{"title":"Timeline of Gaurav Sharma's allegations and the Labour Party saga - RNZ","meta":"12 Hour(s) ago  |  RNZ  |  "},{"title":"Qantas staff 's 'morale in the gutter' as strike action begins on the day airlines annual profit announced - ABC News","meta":"12 Hour(s) ago  |  ABC News (AU)  |  "},{"title":"Cover Screen OS makes the Galaxy Z Flip's front display better and worse - The Verge","meta":"12 Hour(s) ago  |  The Verge  |  "},{"title":"Strike to go ahead despite NSW government caving to union - 9News","meta":"13 Hour(s) ago  |  9News  |  "},{"title":"Jobs at risk at Drogheda headquartered Yapstone","meta":"13 Hour(s) ago  |  rte.ie  |  general"},{"title":"Healthy Breakfast Ideas To Prevent Heartburn - Slurrp","meta":"13 Hour(s) ago  |  Slurrp.com  |  "},{"title":"Singh warns against boosting private health services: ‘We can’t allow that to happen’ - National","meta":"13 Hour(s) ago  |  globalnews.ca  |  general"},{"title":"Royal Mail prepares to tear up union agreement in battle to cut costs - The Telegraph","meta":"13 Hour(s) ago  |  Telegraph.co.uk  |  "},{"title":"Primary takeaways: DeSantis has a FL challenger; NY Dems pick winners - USA TODAY","meta":"13 Hour(s) ago  |  USA Today  |  "},{"title":"Gains from NEM, Stanbic IBTC, 14 other stocks lift market activities to bullish stance - Nairametrics","meta":"13 Hour(s) ago  |  Nairametrics  |  "},{"title":"A 7 million-year-old practice set our ancestors on the course to humanity, new study finds - CNN","meta":"14 Hour(s) ago  |  CNN  |  "},{"title":"Shane Watson Predicts Winner Of Asia Cup 2022 Ahead Of The India vs Pakistan Match - Cricket Addictor","meta":"14 Hour(s) ago  |  Cricketaddictor.com  |  "},{"title":"Gardaí investigate sex assault on teenager just hours after Rose of Tralee celebrations - Independent.ie","meta":"14 Hour(s) ago  |  Independent.ie  |  "},{"title":"Rep. Marjorie Taylor Greene’s home “swatted,” Rome police say - Yahoo News","meta":"14 Hour(s) ago  |  Yahoo Entertainment  |  "},{"title":"Plex imposes password reset after hackers steal data for >15 million users - Ars Technica","meta":"14 Hour(s) ago  |  Ars Technica  |  "},{"title":"The New Shelby Mustang GT500 Code Red Pumps Out a Monstrous 1,300 HP","meta":"14 Hour(s) ago  |  robbreport  |  technology"},{"title":"Yoon's confidential schedule leaked on internet fan club of first lady","meta":"14 Hour(s) ago  |  yna.co.kr  |  general"},{"title":"CNN’s Jake Tapper sparks Twitter outrage after sharing Salena Zito story: ‘He drank the Kool-Aid’","meta":"14 Hour(s) ago  |  nypost  |  top"},{"title":"A Nunavut health leader on how to use paramedics to solve a health staffing crisis in remote communities","meta":"14 Hour(s) ago  |  cbc.ca  |  general"},{"title":"Ediya Coffee to open store in Guam in December","meta":"14 Hour(s) ago  |  yna.co.kr  |  general"},{"title":"Russian troops detain ‘spies’ at Europe’s largest nuclear power station","meta":"14 Hour(s) ago  |  rt  |  top"},{"title":"Shakira fans speculate if girlfriend of her ex, Gerard Piqué, dances to pop star’s song in video","meta":"14 Hour(s) ago  |  nypost  |  top"},{"title":"'My fighting queen': Nunavut baby in Edmonton hospital battling respiratory virus","meta":"14 Hour(s) ago  |  cbc.ca  |  general"},{"title":"Terrorist Captured In Kashmir, Says Pakistan Colonel Gave 30,000 Rupees For Attack - NDTV","meta":"14 Hour(s) ago  |  NDTV News  |  "},{"title":"Researchers engineer novel material capable of 'thinking': Collaboration builds on decades-old research to engineer advanced material - Science Daily","meta":"14 Hour(s) ago  |  Science Daily  |  "},{"title":"Top N.B. Mountie accepts resignation from RCMP employee who admitted to domestic violence","meta":"14 Hour(s) ago  |  cbc.ca  |  general"},{"title":"Canada announces hiring blitz as immigration backlog hits 1.3M applicants - Global News","meta":"14 Hour(s) ago  |  Global News  |  "},{"title":"Samsung Display to expand IT OLED panel biz: CEO","meta":"14 Hour(s) ago  |  yna.co.kr  |  general"},{"title":"First on CNN: Jill Biden tests positive for rebound case of Covid-19 - CNN","meta":"14 Hour(s) ago  |  CNN  |  "},{"title":"UNILAG SSANU, NASU boo union leaders, vow to continue strike - Premium Times","meta":"14 Hour(s) ago  |  Premium Times  |  "},{"title":"California to Ban the Sale of New Gasoline Cars - The New York Times","meta":"14 Hour(s) ago  |  New York Times  |  "},{"title":"Parts of EU could be in drought until November - TheJournal.ie","meta":"14 Hour(s) ago  |  TheJournal.ie  |  "},{"title":"Sylvester Stallone and Jennifer Flavin head for divorce after 25 years of marriage - Geo News","meta":"14 Hour(s) ago  |  Www.geo.tv  |  "},{"title":"The Expanse video game is on the way from Telltale Games - Winter is Coming","meta":"14 Hour(s) ago  |  Winter is Coming  |  "},{"title":"New PLA refueling aircraft to feature at Changchun public event","meta":"14 Hour(s) ago  |  ecns.cn  |  general"},{"title":"Ceragon shareholders reject hostile takeover bid","meta":"14 Hour(s) ago  |  en.globes.co.il  |  general"},{"title":"Is Chelsea target Anthony Gordon worth £60m and how would he fit in at Stamford Bridge? - Daily Mail","meta":"14 Hour(s) ago  |  Daily Mail  |  "},{"title":"Stocks making the biggest moves midday: Peloton, Bed Bath & Beyond, Nordstrom and more - CNBC","meta":"14 Hour(s) ago  |  CNBC  |  "},{"title":"(LEAD) Seoul stocks snap 5-day losing streak; local currency up for 1st in 7 sessions","meta":"14 Hour(s) ago  |  yna.co.kr  |  general"},{"title":"Man fatally shot answering front door of Mercer County apartment","meta":"14 Hour(s) ago  |  6abc  |  top"},{"title":"Oriental Brewery VP shares how beer company could go green","meta":"14 Hour(s) ago  |  koreaherald.com  |  general"},{"title":"McLaren confident about Ricciardo F1 replacement despite Piastri dispute - Motorsport.com","meta":"14 Hour(s) ago  |  Motorsport.com  |  "},{"title":"'She really pulled it out of the bag this time' says proud dad of the 2022 Rose of Tralee - Irish Examiner","meta":"14 Hour(s) ago  |  Irish Examiner  |  "},{"title":"Sylvester Stallone's wife Jennifer files for divorce after 25 years - USA TODAY","meta":"14 Hour(s) ago  |  USA Today  |  "},{"title":"Ben Affleck’s emotional wedding speech to wife Jennifer Lopez is too cute to be missed - The News International","meta":"14 Hour(s) ago  |  The News International  |  "},{"title":"Teachers on strike in Columbus, Ohio over a miserable classroom environment : news","meta":"14 Hour(s) ago  |  reddit.com  |  general"},{"title":"Nearly 50,000 people held in solitary confinement in US, report says : news","meta":"14 Hour(s) ago  |  reddit.com  |  general"},{"title":"“Far out”: Apple confirms iPhone-focused launch event on September 7 - Ars Technica","meta":"14 Hour(s) ago  |  Ars Technica  |  "},{"title":"Chuck Schumer and Elizabeth Warren celebrate Biden’s student loan cancellation: ‘Giant step forward’","meta":"14 Hour(s) ago  |  independentuk  |  world"},{"title":"We have solutions to give everyone access to cooling, but we need to act now","meta":"15 Hour(s) ago  |  geo.tv  |  general"},{"title":"Japan waives pre-departure Covid-19 tests for vaccinated visitors but daily caps remain","meta":"15 Hour(s) ago  |  newsonjapan.com  |  general"},{"title":"UBC In The News - UBC News","meta":"15 Hour(s) ago  |  News.ubc.ca  |  "},{"title":"Biden to Cancel $10,000 in Student Loan Debt for Borrowers Earning Less Than $125,000 - The New York Times","meta":"15 Hour(s) ago  |  New York Times  |  "},{"title":"Masks will not be mandatory at Sask. universities as fall semester looms","meta":"15 Hour(s) ago  |  globalnews.ca  |  general"},{"title":"Boris Johnson: Endure energy crisis to counter Russia in Ukraine - BBC","meta":"15 Hour(s) ago  |  BBC News  |  "},{"title":"Lamido, cohorts caused PDP’s defeat in 2015 – Wike - Punch Newspapers","meta":"15 Hour(s) ago  |  The Punch  |  "},{"title":"S. Korean Bond Yields on Aug. 24, 2022","meta":"15 Hour(s) ago  |  yna.co.kr  |  general"},{"title":"Liger movie release and review LIVE UPDATES: All eyes on Vijay Deverakonda’s film - The Indian Express","meta":"15 Hour(s) ago  |  The Indian Express  |  "},{"title":"Divine W: Perfect Wonderland is an upcoming oriental-styled MMORPG now available for pre-registration - GamingonPhone","meta":"15 Hour(s) ago  |  Gamingonphone.com  |  "},{"title":"Ukraine receives more military aid from allies on its independence day - CBC News","meta":"15 Hour(s) ago  |  CBC News  |  "},{"title":"All the energy bill help and free cash you can apply for NOW – and you could get up to £2335... - The Sun","meta":"15 Hour(s) ago  |  The Sun  |  "},{"title":"PGA Tour announces massive changes to event calendar, player payouts in response to LIV Golf challenge","meta":"15 Hour(s) ago  |  insider  |  top"},{"title":"The 5 best pizza ovens for making restaurant-quality pies at home","meta":"15 Hour(s) ago  |  insider  |  top"},{"title":"Special report lays out best practices for handling bias in radiology AI","meta":"15 Hour(s) ago  |  medicalxpress  |  top"},{"title":"Olivia Wilde Addressed Rumors Of A Pay Disparity Between Florence Pugh And Harry Styles In \"Don't Worry Darling\"","meta":"15 Hour(s) ago  |  buzzfeed  |  entertainment"},{"title":"Head of federal telecom regulator did not breach Conflict of Interest Act: watchdog","meta":"15 Hour(s) ago  |  lethbridgenewsnow  |  top"},{"title":"Barcelona vs Manchester City, Charity Match: Confirmed Lineups, Live Thread - Barca Blaugranes","meta":"15 Hour(s) ago  |  Barca Blaugranes  |  "},{"title":"Hyundai Motor invests in an automotive semiconductor startup","meta":"15 Hour(s) ago  |  koreaherald.com  |  general"},{"title":"Thulas Nxesi places special adviser on special leave amid allegations of impropriety","meta":"15 Hour(s) ago  |  news24.com  |  general"},{"title":"Fetterman criticizes Oz campaign’s eat-your-vegetables health advice","meta":"15 Hour(s) ago  |  washingtonpost.com  |  politics"},{"title":"Slain doctor's family still awaiting answers, 5 months after he was gunned down in his Soweto surgery","meta":"15 Hour(s) ago  |  news24.com  |  general"},{"title":"Chinese premier calls for quick progress in follow-up FTA talks with S. Korea","meta":"15 Hour(s) ago  |  yna.co.kr  |  general"},{"title":"Abuja-Kaduna train route: FG backs down, says it would be insensitive to restart operations now - Nairametrics","meta":"15 Hour(s) ago  |  Nairametrics  |  "},{"title":"Warning for ALL Instagram users – you might be making a very dangerous mistake... - The Irish Sun","meta":"15 Hour(s) ago  |  The Irish Sun  |  "},{"title":"Nigeria needs to spend over $410bn for energy transition – VP, Osinbajo - Daily Post Nigeria","meta":"15 Hour(s) ago  |  Daily Post Nigeria  |  "},{"title":"Domestic violence services for men on P.E.I. expanding as need grows","meta":"15 Hour(s) ago  |  cbc.ca  |  general"},{"title":"\"They Can Beat Indian Team...\": Shane Watson On Rohit Sharma-led Side's Biggest Hurdle In Asia Cup - NDTV Sports","meta":"15 Hour(s) ago  |  NDTV News  |  "},{"title":"'My fighting queen': Nunavut baby in Edmonton hospital battling respiratory virus - CBC.ca","meta":"15 Hour(s) ago  |  CBC News  |  "},{"title":"Chinese consulate in San Francisco condemns continuous anti-Asian hate crimes in Oakland, reminds citizens to be cautious","meta":"15 Hour(s) ago  |  ecns.cn  |  general"},{"title":"Gen Z candidate will win Democratic nomination in Florida's 10th District, CNN projects - CNN","meta":"15 Hour(s) ago  |  CNN  |  "},{"title":"Psst, The Apple Watch SE Cellular Is On Sale For Its Lowest Price Ever Today - Forbes","meta":"15 Hour(s) ago  |  Forbes  |  "},{"title":"Korea Herald English Speech Contest sees 36 winners","meta":"15 Hour(s) ago  |  koreaherald.com  |  general"},{"title":"Apple sends out invites for September 7 'Far Out' event; iPhone 14 Max, high-end 'rugged' watch expected - The Indian Express","meta":"15 Hour(s) ago  |  The Indian Express  |  "},{"title":"6 BoC officials sacked amid sugar smuggling probe - The Manila Times","meta":"15 Hour(s) ago  |  The Manila Times  |  "},{"title":"Demystifying SDG, ESG and DEI - The Manila Times","meta":"15 Hour(s) ago  |  The Manila Times  |  "},{"title":"Philippines SEC Discuss Crypto Regulatory Efforts With Binance - CoinGape","meta":"15 Hour(s) ago  |  Coingape  |  "},{"title":"BBNaija: I Don Change Am For Chichi Like Twice Say Make She Free Me - Deji Tells Giddyfia (Video) - Latest Big Brother Naija News And Updates 2022 - Big Brother News","meta":"15 Hour(s) ago  |  Bbn.ng  |  "},{"title":"Tralee Park sealed off as gardaí investigate alleged attack on young woman - TheJournal.ie","meta":"15 Hour(s) ago  |  TheJournal.ie  |  "},{"title":"Why Snapchat keeps asking for photo access? - JustNje","meta":"15 Hour(s) ago  |  Justnje.com  |  "},{"title":"Sylvester Stallone's wife Jennifer Flavin files for divorce after 25-year marriage and accuses actor of h... - The Sun","meta":"15 Hour(s) ago  |  The Sun  |  "},{"title":"It’s official: Apple sends out invitations for its 2022 iPhone fall event - XDA Developers","meta":"15 Hour(s) ago  |  XDA Developers  |  "},{"title":"Planet-size sunspot could launch solar flares toward Earth - Livescience.com","meta":"15 Hour(s) ago  |  Live Science  |  "},{"title":"Olivia Wilde Addressed Rumors Of A Pay Disparity Between Florence Pugh And Harry Styles In \"Don't Worry Darling\" - BuzzFeed","meta":"15 Hour(s) ago  |  Buzzfeed  |  "},{"title":"Biden cancels $10000 in student loan debts - BBC","meta":"15 Hour(s) ago  |  BBC News  |  "},{"title":"US President Joe Biden announces nearly $US3 billion in new military aid for Ukraine - ABC News","meta":"15 Hour(s) ago  |  ABC News (AU)  |  "},{"title":"Angolans vote for president in tight race - Punch Newspapers","meta":"15 Hour(s) ago  |  The Punch  |  "},{"title":"Georgia cops respond to 'swatting' call at home of Rep. Marjorie Taylor Greene - CNBC","meta":"15 Hour(s) ago  |  CNBC  |  "},{"title":"Sylvester Stallone's wife files for divorce after 25 years as she makes accusations - The Mirror","meta":"15 Hour(s) ago  |  Mirror Online  |  "},{"title":"Samsung launches 2022 Neo QLED 8K TVs in the Philippines - BusinessWorld Online","meta":"15 Hour(s) ago  |  BusinessWorld Online  |  "},{"title":"Apple’s ‘Far out’ iPhone 14 event is happening September 7th - The Verge","meta":"15 Hour(s) ago  |  The Verge  |  "},{"title":"President as Chief Executive: Pathways to effectiveness - Manila Bulletin","meta":"15 Hour(s) ago  |  Mb.com.ph  |  "},{"title":"RM teases second volume of BTS' photo book series","meta":"15 Hour(s) ago  |  yna.co.kr  |  general"},{"title":"Seoul stocks snap 5-day losing streak; local currency up for 1st in 7 sessions","meta":"15 Hour(s) ago  |  yna.co.kr  |  general"},{"title":"Apple sends invites for Sept. 7 launch event, new iPhone 14 expected - CNBC","meta":"15 Hour(s) ago  |  CNBC  |  "}]
};

/**
* Assign a unique id to each store. You'll use this `id`
* later to associate each point on the map with a listing
* in the sidebar.
*/
stores.features.forEach((store, i) => {
store.properties.id = i;
});

/**
* Wait until the map loads to make changes to the map.
*/
map.on('load', () => {
/**
* This is where your '.addLayer()' used to be, instead
* add only the source without styling a layer
*/
map.addSource('places', {
'type': 'geojson',
'data': stores
});

/**
* Add all the things to the page:
* - The location listings on the side of the page
* - The markers onto the map
*/
buildLocationList(stores);
addMarkers();
});

/**
* Add a marker to the map for every store listing.
**/
function addMarkers() {
/* For each feature in the GeoJSON object above: */
for (const marker of stores.features) {
/* Create a div element for the marker. */
const el = document.createElement('div');
/* Assign a unique `id` to the marker. */
el.id = `marker-${marker.properties.id}`;
/* Assign the `marker` class to each marker for styling. */
el.className = 'marker';

/**
* Create a marker using the div element
* defined above and add it to the map.
**/
new mapboxgl.Marker(el, { offset: [0, -23] })
.setLngLat(marker.geometry.coordinates)
.addTo(map);

/**
* Listen to the element and when it is clicked, do three things:
* 1. Fly to the point
* 2. Close all other popups and display popup for clicked store
* 3. Highlight listing in sidebar (and remove highlight for all other listings)
**/
el.addEventListener('click', (e) => {
/* Fly to the point */
flyToStore(marker);
/* Close all other popups and display popup for clicked store */
createPopUp(marker);
/* Highlight listing in sidebar */
const activeItem = document.getElementsByClassName('active');
e.stopPropagation();
if (activeItem[0]) {
activeItem[0].classList.remove('active');
}
const listing = document.getElementById(
`listing-${marker.properties.id}`
);
listing.classList.add('active');
});
}
}

/**
* Add a listing for each store to the sidebar.
**/
function buildLocationList(stores) {
for (const store of stores.features) {
/* Add a new listing section to the sidebar. */
const listings = document.getElementById('listings');
const listing = listings.appendChild(document.createElement('div'));
/* Assign a unique `id` to the listing. */
listing.id = `listing-${store.properties.id}`;
/* Assign the `item` class to each listing for styling. */
listing.className = 'item';

/* Add the link to the individual listing created above. */
const link = listing.appendChild(document.createElement('a'));
link.href = '#';
link.className = 'title';
link.id = `link-${store.properties.id}`;
link.innerHTML = `${store.properties.address}`;

/* Add details to the individual listing. */
const details = listing.appendChild(document.createElement('div'));
details.innerHTML = `${store.properties.city}`;
if (store.properties.phone) {
details.innerHTML += ` &middot; ${store.properties.phoneFormatted}`;
}

/**
* Listen to the element and when it is clicked, do four things:
* 1. Update the `currentFeature` to the store associated with the clicked link
* 2. Fly to the point
* 3. Close all other popups and display popup for clicked store
* 4. Highlight listing in sidebar (and remove highlight for all other listings)
**/
link.addEventListener('click', function () {
for (const feature of stores.features) {
if (this.id === `link-${feature.properties.id}`) {
flyToStore(feature);
createPopUp(feature);
}
}
const activeItem = document.getElementsByClassName('active');
if (activeItem[0]) {
activeItem[0].classList.remove('active');
}
this.parentNode.classList.add('active');
});
}
}

/**
* Use Mapbox GL JS's `flyTo` to move the camera smoothly
* a given center point.
**/
function flyToStore(currentFeature) {
map.flyTo({
center: currentFeature.geometry.coordinates,
zoom: 15
});
}

/**
* Create a Mapbox GL JS `Popup`.
**/
function createPopUp(currentFeature) {
const popUps = document.getElementsByClassName('mapboxgl-popup');
if (popUps[0]) popUps[0].remove();
const popup = new mapboxgl.Popup({ closeOnClick: false })
.setLngLat(currentFeature.geometry.coordinates)
.setHTML(
`<h3>Sweetgreen</h3><h4>${currentFeature.properties.address}</h4>`
)
.addTo(map);
}
</script>
</body>
</html>